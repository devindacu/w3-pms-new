Never replace or reset the database when pulling or pushing code updates.
Instead:

Update code only

Apply incremental database migrations

Preserve existing settings, users, messages, and history

ğŸ§± Recommended Architecture
1ï¸âƒ£ Separate Code & Data (MANDATORY)

Keep these completely independent:

Layer	How
Application Code	Git (versioned)
Database	Persistent DB (MySQL / PostgreSQL)
Config	.env or settings table
Media / Logs	External storage

ğŸš« Never store database files inside the code repository.

2ï¸âƒ£ Versioned Database Migrations (KEY RULE)

Use migration files instead of full database imports.

Example
-- migration_2026_01_19_add_ai_chat_logs.sql
ALTER TABLE chat_logs ADD COLUMN ai_confidence_score FLOAT DEFAULT NULL;


âœ” Existing data stays
âœ” Only new structure is added
âœ” Runs once per version

Every release = new migration file, never modify old ones.

3ï¸âƒ£ Update Flow (Safe Pull / Push)
ğŸ”„ Code Update Flow
git pull origin main
composer install --no-dev
npm run build

ğŸ”„ Database Update Flow
php artisan migrate


or

sequelize db:migrate


â¡ï¸ NO DROP TABLE
â¡ï¸ NO RESET
â¡ï¸ NO IMPORT .sql FILES

4ï¸âƒ£ System Settings Protection

Store system settings in one of these ways:

âœ… Best Options

settings database table

.env file (not tracked in Git)

Example Table
settings
- id
- key
- value
- updated_at


âš ï¸ Never hard-code system settings in source code.

5ï¸âƒ£ Backward-Compatible Updates

Every new version must:

Work with old data

Add new fields with defaults

Never rename/remove columns without migration logic

Example (Safe)
ALTER TABLE users ADD COLUMN language VARCHAR(10) DEFAULT 'en';

6ï¸âƒ£ Version Control Strategy
Use Semantic Versioning
v1.2.0 â†’ v1.3.0

Version Tracking Table
system_versions
- version
- applied_at


This lets you:
âœ” Track updates
âœ” Roll back safely
âœ” Audit changes

7ï¸âƒ£ Rollback Safety (Highly Recommended)

Before every update:

mysqldump db_name > backup_2026_01_19.sql


Or use:

Automated daily backups

Point-in-time recovery

8ï¸âƒ£ ZERO-DOWNTIME Deployment (Optional)

For production systems:

Blueâ€“Green deployment

Feature flags

Maintenance mode during migration

ğŸš« What NOT to Do

âŒ Re-import database
âŒ Use DROP TABLE
âŒ Push .env files
âŒ Overwrite settings
âŒ Modify old migration files